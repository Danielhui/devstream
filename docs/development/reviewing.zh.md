# 审查指南

本文档涵盖了谁可以审查此项目的拉取请求，并提供有关如何执行符合我们社区标准和行为准则的代码审查的指南。所有审阅者必须阅读本文件并同意遵守项目审阅指南。不遵守这些准则的审稿人可能会被撤销其审核权。

[howto]: https://contribute.cncf.io/maintainers/github/templates/recommended/reviewing/

## 审阅者角色

审阅者角色不同于维护者角色。

审阅者可以批准拉取请求，但不能合并它。维护者最终处理批准和合并拉取请求。

## 价值观

所有审阅者都必须遵守 [行为准则](https://github.com/devstream-io/devstream/blob/main/CODE_OF_CONDUCT.md)并受其保护.审核者不应容忍不良行为，并鼓励他们报告任何违反行为准则的行为。上面列出的所有价值观均来自我们的行为准则。

以下是它如何具体应用于代码审查的具体示例：

### 包容性

变得热情与包容。您应主动确保作者认可。虽然任何特定的拉取请求最终可能不会被合并，但总的来说，我们希望人们有一个很好的体验，并愿意再次做出贡献。回答他们不知道的问题，或者当他们遇到困难时提供具体的帮助。

### 持续性

通过可执行的健康边界来避免懈怠。以下是一些如何鼓励审稿人采取行动照顾自己的示例：

- 当提交一个pull请求时，作者应该满足基线期望，比如编写测试模块。
- 如果精力发生变化，您可以退出pull请求，并分配其他人。
- 如果与作者的互动不符合行为准则，请关闭PR，并向行为准则委员会或联络人提出。你的工作不是让别人听你的。

### 可信任

在审核期间请做到值得信赖，您的操作既可以建立信任有助于维护社区对本项目的信任。以下是我们建立信任的方式示例：

- **透明** - 如果拉取请求不会合并，请清楚地说明原因并关闭它。如果拉取请求在一段时间内不会被审阅，请告知作者，以便他们可以设置期望并了解其被阻止的原因
- **诚信** - 在决定是否应合并变更时，将项目的最佳利益置于个人关系或公司隶属关系之前。
- **稳定** - 仅当更改不会对项目稳定性产生负面影响时，才会合并。合并不符合我们质量标准的Pull请求可能很有诱惑，例如，当审核延迟时，或者因为我们试图快速交付新功能时，但回归可能会严重损害社区对我们项目的信任。

## 流程化

- PR 可能会根据 OWNERS 文件自动分配。如果没有，任何审阅者都可以分配拉取请求，并设置特定的标签。
- 该项目使用 GitHub Action 进行自动化，但目前没有使用额外的自动化/机器人将 PR 分配给审阅者。
- 审阅者应等待自动检查通过后再进行审阅。
- 文档/自动化相关的关键更改需要维护者的审查。足够清晰的微小调整不需要维护者的审查。如有疑问，请维护人员仔细检查。
- GitHub Actions 检查必须在合并之前通过，唯一的例外是提交消息 lint，这可以通过压缩和重新编辑消息来改进。
- 当 PR 遇到困难时，审阅者应该联系贡献者以帮助推进工作，或者向维护者报告状态。
- 通常，不建议审阅者将更改直接提交到拉取请求。例外情况是：当原作者放弃拉取请求时;原作者是新的贡献者，可能需要帮助。
- 维护者可以在审查后合并他们自己的拉取请求。
- 维护人员可以在非常需要的时候合并拉取请求而无需审查。

## 清单

以下是一组适用于所有拉取请求的常见问题：

- [ ] 此 PR 是否针对正确的分支？
- [ ] 提交消息是否提供了充分的更改描述？
- [ ] 提交消息是否遵循 [传统的提交消息规范](https://www.conventionalcommits.org/en/v1.0.0/)?
- [ ] 受影响的代码是否有相应的测试？
- [ ] 更改是否记录在文档中，不仅使用内联文档，还记录在概念文档（如新功能概述）或基于任务的文档（如教程）中？考虑是否应该在DevStream的博客上宣布此更改。
- [ ] 这修改是否需要公告或是主要版本的重大更改？

## 阅读列表

我们鼓励审稿人阅读以下文章，以获取有关常见审稿人任务的帮助：

- [常规提交](https://www.conventionalcommits.org/en/v1.0.0/)
- [项目布局](https://docs.devstream.io/en/latest/development/project-layout/)
- [关闭的艺术：如何关闭未完成或被拒绝的拉取请求](https://blog.jessfraz.com/post/the-art-of-closing/)
- [善意和代码审查：改进我们反馈的方式](https://product.voxmedia.com/2018/8/21/17549400/kindness-and-code-reviews-improving-the-way-we-give-feedback)
- [人类代码审查指南：良好反馈和反向反馈的示例](https://phauer.com/2018/code-review-guidelines/#code-reviews-guidelines-for-the-reviewer)
